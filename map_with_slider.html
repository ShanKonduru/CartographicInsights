<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Map with Slider</title>
    <!-- Folium CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
        integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
        crossorigin="" />
    <!-- Folium JavaScript -->
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
        integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
        crossorigin=""></script>
</head>

<body>
    <!-- Map container -->
    <div id="map" style="width: 100%; height: 600px;"></div>

    <!-- Slider container -->
    <div id="slider-container">
        <input type="range" min="2010" max="2015" value="2010" class="slider" id="year-slider">
        <p>Selected Year: <span id="selected-year">2010</span></p>
    </div>

    <!-- JavaScript code -->
    <script>
        var map = L.map('map').setView([39.8283, -98.5795], 4);

        // Add a tile layer
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        var slider = document.getElementById("year-slider");
        var output = document.getElementById("selected-year");
        output.innerHTML = slider.value;

        slider.oninput = function () {
            output.innerHTML = this.value;
            updateMapMarkers(this.value);
        }

        function updateMapMarkers(selectedYear) {
            // Remove existing markers
            document.querySelectorAll('.marker').forEach(e => e.remove());

            // Example data - replace with your actual data
            var salesData = [
                { "Latitude": 40.7128, "Longitude": -74.0060, "SalesPerson": "John", "SalesValue": "$10K", "YearOfSale": 2010 },
                { "Latitude": 34.0522, "Longitude": -118.2437, "SalesPerson": "Alice", "SalesValue": "$20K", "YearOfSale": 2012 },
                { "Latitude": 41.8781, "Longitude": -87.6298, "SalesPerson": "Bob", "SalesValue": "$13K", "YearOfSale": 2015 }
            ];

            // Filter sales data based on the selected year
            var filteredData = salesData.filter(row => row.YearOfSale == selectedYear);

            // Add markers for filtered sales data
            filteredData.forEach(row => {
                var marker = L.marker([row.Latitude, row.Longitude]).addTo(map);
                marker.bindPopup(`SalesPerson: ${row.SalesPerson}<br>SalesValue: ${row.SalesValue}`);
                marker._icon.classList.add('marker');
            });
        }
    </script>
</body>

</html>